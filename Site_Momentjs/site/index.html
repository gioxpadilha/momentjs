<html>

	<head>
		<meta charset = "utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
		<title>Moment JS</title>
	</head>
	<script>
		var cont = 0;
	</script>
	<body>
	<main>
		<form name="form">
			<div class="form-group">
				<label class="control-label" for="Date">ADICIONAR DATA</label>
				<input type="date" class="form-control" id="date" name="date" placeholder="DD/MM/YYYY">
			</div>
			<div class="form-group">
				<input type="button" name="button" class="btn btn-primary" onclick="Calcula();" value="Calcular">
			</div>
		 </form>
		 <div id="teste">

		 </div>
	</main>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.27.0/moment-with-locales.min.js"></script>
		<script>
			function Calcula(){
				cont++;
				var data = moment(document.getElementById('date').value);
				var agora = moment();
				if (data>agora) {
					var tempo = new Array();
					tempo[cont] = moment.duration(data - agora);
					setInterval(function() {
						if (tempo[cont].days()==0) {
							console.log(tempo[cont].days());
							document.getElementById('teste').innerHTML = '<p>Falta '+(tempo[cont].days()+1)+' dia</p>';
						}
						else{
	    				document.getElementById('teste').innerHTML = '<p>Faltam '+(tempo[cont].days()+1)+' dias</p>';
							console.log(tempo[cont].days());
						}
	  			});
				}
				else {
					var tempo = new Array();
					tempo[cont] = moment.duration(agora - data);
					setInterval(function() {
						if (tempo[cont].days()==1) {
							console.log(tempo[cont].days());
							document.getElementById('teste').innerHTML = '<p>Faz '+(tempo[cont].days()-1)+' dia</p>';
						}
						else if (tempo[cont].days()==0) {
							console.log(tempo[cont].days());
							document.getElementById('teste').innerHTML = '<p>Ã‰ hoje</p>';
						}
						else{
							console.log(tempo[cont].days());
	    				document.getElementById('teste').innerHTML = '<p>Fazem '+(tempo[cont].days()-1)+' dias</p>';
						}
	  			});
				}
			}

		</script>


	</body>

</html>
